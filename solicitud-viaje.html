<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitar Viaje - MotoTaxi</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h2>Solicitar un Viaje</h2>

        <form id="solicitudViaje">
            <label for="origen">Origen:</label>
            <input type="text" id="origen" name="origen" placeholder="Ingresa tu ubicaci√≥n" required>

            <label for="destino">Destino:</label>
            <input type="text" id="destino" name="destino" placeholder="Ingresa tu destino" required>

            <button type="submit">Solicitar Viaje</button>
        </form>

        <h3>Ruta en el Mapa</h3>
        <div id="map" style="width: 100%; height: 400px;"></div>

        <h3>Tiempo Estimado de Viaje</h3>
        <p id="tiempoEstimado">Ingrese la ruta para calcular el tiempo.</p>
    </div>

    <script>
        let map;
        let directionsService;
        let directionsRenderer;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 32.6245, lng: -115.4521 }, // üìç Ubicaci√≥n inicial (Ejemplo: Mexicali)
                zoom: 14
            });

            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer();
            directionsRenderer.setMap(map);
        }

        document.getElementById("solicitudViaje").addEventListener("submit", function(event) {
            event.preventDefault();

            const origen = document.getElementById("origen").value;
            const destino = document.getElementById("destino").value;

            if (origen && destino) {
                calcularRuta(origen, destino);
            } else {
                alert("Por favor ingrese origen y destino.");
            }
        });

        function calcularRuta(origen, destino) {
            const request = {
                origin: origen,
                destination: destino,
                travelMode: google.maps.TravelMode.DRIVING
            };

            directionsService.route(request, function(result, status) {
                if (status === google.maps.DirectionsStatus.OK) {
                    directionsRenderer.setDirections(result);

                    // Obtener el tiempo estimado del viaje
                    const tiempo = result.routes[0].legs[0].duration.text;
                    document.getElementById("tiempoEstimado").textContent = `Tiempo estimado: ${tiempo}`;
                } else {
                    alert("No se pudo calcular la ruta. Intente con otra direcci√≥n.");
                }
            });
        }
    </script>

    <!-- üìå API Key de Google Maps -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkll2RGKh0lQrKjetY8jvrqPsVd0JHJAU&callback=initMap"></script>

</body>
</html>
